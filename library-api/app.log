2025-09-12T11:19:51.561-03:00  WARN 12660 --- [libraryapi] [main] com.zaxxer.hikari.HikariConfig           : library-db-pool - idleTimeout is close to or more than maxLifetime, disabling it.
2025-09-12T11:19:53.423-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.w.s.r.ResourceUrlEncodingFilter      : Filter 'resourceUrlEncodingFilter' configured for use
2025-09-12T11:19:54.421-03:00  WARN 12660 --- [libraryapi] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-09-12T11:19:54.547-03:00 DEBUG 12660 --- [libraryapi] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 21 mappings in 'requestMappingHandlerMapping'
2025-09-12T11:19:54.570-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/login] in 'viewControllerHandlerMapping'
2025-09-12T11:19:54.603-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-12T11:19:54.630-03:00 TRACE 12660 --- [libraryapi] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {authorizationServerConfiguration=com.victormacedov.library_api.config.AuthorizationServerConfiguration$$SpringCGLIB$$0@2e549515, securityConfiguration=com.victormacedov.library_api.config.SecurityConfiguration$$SpringCGLIB$$0@7a80ebcd}
2025-09-12T11:19:54.632-03:00  INFO 12660 --- [libraryapi] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name customAuthenticationProvider
2025-09-12T11:19:55.813-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000028181b2f330@60ca607 with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, UsernamePasswordAuthenticationFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
2025-09-12T11:19:55.918-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, UsernamePasswordAuthenticationFilter, BearerTokenAuthenticationFilter, JwtCustomAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-12T11:19:55.935-03:00  WARN 12660 --- [libraryapi] [main] o.s.s.c.a.web.builders.WebSecurity       : You are asking Spring Security to ignore Deferred [Mvc [pattern='/v2/api-docs/**'], Ant [pattern='/v2/api-docs/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2025-09-12T11:19:55.937-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.s.web.DefaultSecurityFilterChain     : Will not secure Deferred [Mvc [pattern='/v2/api-docs/**'], Ant [pattern='/v2/api-docs/**']]
2025-09-12T11:19:55.937-03:00  WARN 12660 --- [libraryapi] [main] o.s.s.c.a.web.builders.WebSecurity       : You are asking Spring Security to ignore Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2025-09-12T11:19:55.937-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.s.web.DefaultSecurityFilterChain     : Will not secure Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]
2025-09-12T11:19:55.937-03:00  WARN 12660 --- [libraryapi] [main] o.s.s.c.a.web.builders.WebSecurity       : You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2025-09-12T11:19:55.937-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.s.web.DefaultSecurityFilterChain     : Will not secure Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]
2025-09-12T11:19:55.937-03:00  WARN 12660 --- [libraryapi] [main] o.s.s.c.a.web.builders.WebSecurity       : You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-ui.html/**'], Ant [pattern='/swagger-ui.html/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2025-09-12T11:19:55.937-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.s.web.DefaultSecurityFilterChain     : Will not secure Deferred [Mvc [pattern='/swagger-ui.html/**'], Ant [pattern='/swagger-ui.html/**']]
2025-09-12T11:19:55.937-03:00  WARN 12660 --- [libraryapi] [main] o.s.s.c.a.web.builders.WebSecurity       : You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2025-09-12T11:19:55.937-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.s.web.DefaultSecurityFilterChain     : Will not secure Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]
2025-09-12T11:19:55.938-03:00  WARN 12660 --- [libraryapi] [main] o.s.s.c.a.web.builders.WebSecurity       : You are asking Spring Security to ignore Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.
2025-09-12T11:19:55.938-03:00 DEBUG 12660 --- [libraryapi] [main] o.s.s.web.DefaultSecurityFilterChain     : Will not secure Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]
2025-09-12T11:19:56.016-03:00 DEBUG 12660 --- [libraryapi] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-12T11:19:56.180-03:00 DEBUG 12660 --- [libraryapi] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-12T11:20:33.490-03:00  INFO 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-12T11:20:33.491-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-09-12T11:20:33.491-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-09-12T11:20:33.492-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-09-12T11:20:33.494-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@530daa7e
2025-09-12T11:20:33.494-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@42141c59
2025-09-12T11:20:33.495-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-12T11:20:33.495-03:00  INFO 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2025-09-12T11:20:33.509-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v2/api-docs/**'], Ant [pattern='/v2/api-docs/**']]] and having filters [] (1/8)
2025-09-12T11:20:33.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]] and having filters [] (2/8)
2025-09-12T11:20:33.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]] and having filters [] (3/8)
2025-09-12T11:20:33.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui.html/**'], Ant [pattern='/swagger-ui.html/**']]] and having filters [] (4/8)
2025-09-12T11:20:33.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]] and having filters [] (5/8)
2025-09-12T11:20:33.513-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]] and having filters [] (6/8)
2025-09-12T11:20:33.515-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain defined as 'authServerSecurityFilterChain' in [class path resource [com/victormacedov/library_api/config/AuthorizationServerConfiguration.class]] matching [org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000028181b2f330@60ca607] and having filters [DisableEncodeUrl, WebAsyncManagerIntegration, SecurityContextHolder, AuthorizationServerContext, HeaderWriter, Csrf, OidcLogoutEndpoint, Logout, OAuth2AuthorizationServerMetadataEndpoint, OAuth2AuthorizationEndpoint, OAuth2DeviceVerificationEndpoint, OidcProviderConfigurationEndpoint, NimbusJwkSetEndpoint, OAuth2ClientAuthentication, UsernamePasswordAuthentication, BearerTokenAuthentication, Authentication, RequestCacheAware, SecurityContextHolderAwareRequest, AnonymousAuthentication, ExceptionTranslation, Authorization, OAuth2TokenEndpoint, OAuth2TokenIntrospectionEndpoint, OAuth2TokenRevocationEndpoint, OAuth2DeviceAuthorizationEndpoint, OidcUserInfoEndpoint] (7/8)
2025-09-12T11:20:33.516-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=meu-client&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fauthorized
2025-09-12T11:20:33.517-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/27)
2025-09-12T11:20:33.518-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/27)
2025-09-12T11:20:33.521-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/27)
2025-09-12T11:20:33.522-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationServerContextFilter (4/27)
2025-09-12T11:20:33.555-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (5/27)
2025-09-12T11:20:33.567-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (6/27)
2025-09-12T11:20:33.571-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] s.s.w.c.CsrfTokenRequestAttributeHandler : Wrote a CSRF token to the following request attributes: [_csrf, org.springframework.security.web.csrf.CsrfToken]
2025-09-12T11:20:33.571-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match And [CsrfNotRequired [TRACE, HEAD, GET, OPTIONS], Not [Or [Or [Or [Ant [pattern='/oauth2/token', POST], Ant [pattern='/oauth2/introspect', POST], Ant [pattern='/oauth2/revoke', POST], Ant [pattern='/oauth2/device_authorization', POST], Ant [pattern='/oauth2/par', POST]], Ant [pattern='/.well-known/oauth-authorization-server', GET], Or [Ant [pattern='/oauth2/authorize', GET], Ant [pattern='/oauth2/authorize', POST]], Ant [pattern='/oauth2/token', POST], Ant [pattern='/oauth2/introspect', POST], Ant [pattern='/oauth2/revoke', POST], Ant [pattern='/oauth2/device_authorization', POST], Or [Ant [pattern='/oauth2/device_verification', GET], Ant [pattern='/oauth2/device_verification', POST]], Or [Ant [pattern='/.well-known/openid-configuration', GET], Or [Ant [pattern='/oauth2/logout', GET], Ant [pattern='/oauth2/logout', POST]], Or [Ant [pattern='/oauth2/userinfo', GET], Ant [pattern='/oauth2/userinfo', POST]]], Ant [pattern='/oauth2/jwks', GET]], org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@5bf9c995]]]
2025-09-12T11:20:33.572-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking OidcLogoutEndpointFilter (7/27)
2025-09-12T11:20:33.572-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (8/27)
2025-09-12T11:20:33.572-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern='/logout', POST]
2025-09-12T11:20:33.572-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking OAuth2AuthorizationServerMetadataEndpointFilter (9/27)
2025-09-12T11:20:33.573-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking OAuth2AuthorizationEndpointFilter (10/27)
2025-09-12T11:20:33.582-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists
2025-09-12T11:20:33.583-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2025-09-12T11:20:33.583-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2025-09-12T11:20:33.585-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with OAuth2AuthorizationCodeRequestAuthenticationProvider (1/21)
2025-09-12T11:20:33.782-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] izationCodeRequestAuthenticationProvider : Retrieved registered client
2025-09-12T11:20:33.784-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] izationCodeRequestAuthenticationProvider : Validated authorization code request parameters
2025-09-12T11:20:33.784-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] izationCodeRequestAuthenticationProvider : Did not authenticate authorization code request since principal not authenticated
2025-09-12T11:20:34.511-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking OAuth2DeviceVerificationEndpointFilter (11/27)
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking OidcProviderConfigurationEndpointFilter (12/27)
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking NimbusJwkSetEndpointFilter (13/27)
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking OAuth2ClientAuthenticationFilter (14/27)
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking UsernamePasswordAuthenticationFilter (15/27)
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] w.a.UsernamePasswordAuthenticationFilter : Did not match request to Ant [pattern='/login', POST]
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (16/27)
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthenticationFilter (17/27)
2025-09-12T11:20:34.512-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.w.a.AuthenticationFilter           : Did not match request to org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.DPoPAuthenticationConfigurer$DPoPRequestMatcher@237afe1d
2025-09-12T11:20:34.513-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (18/27)
2025-09-12T11:20:34.513-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2025-09-12T11:20:34.513-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (19/27)
2025-09-12T11:20:34.515-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (20/27)
2025-09-12T11:20:34.516-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (21/27)
2025-09-12T11:20:34.516-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (22/27)
2025-09-12T11:20:34.516-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing GET /oauth2/authorize?response_type=code&client_id=meu-client&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fauthorized
2025-09-12T11:20:34.516-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /oauth2/authorize?response_type=code&client_id=meu-client&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fauthorized using org.springframework.security.authorization.AuthenticatedAuthorizationManager@4e0f850d
2025-09-12T11:20:34.516-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2025-09-12T11:20:34.517-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.authentication.AuthenticationFilter.doFilterInternal(AuthenticationFilter.java:177) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:135) ~[spring-security-oauth2-resource-server-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:235) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:229) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.authorization.web.OAuth2ClientAuthenticationFilter.doFilterInternal(OAuth2ClientAuthenticationFilter.java:129) ~[spring-security-oauth2-authorization-server-1.5.2.jar:1.5.2]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.authorization.web.NimbusJwkSetEndpointFilter.doFilterInternal(NimbusJwkSetEndpointFilter.java:88) ~[spring-security-oauth2-authorization-server-1.5.2.jar:1.5.2]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.authorization.oidc.web.OidcProviderConfigurationEndpointFilter.doFilterInternal(OidcProviderConfigurationEndpointFilter.java:92) ~[spring-security-oauth2-authorization-server-1.5.2.jar:1.5.2]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.authorization.web.OAuth2DeviceVerificationEndpointFilter.doFilterInternal(OAuth2DeviceVerificationEndpointFilter.java:152) ~[spring-security-oauth2-authorization-server-1.5.2.jar:1.5.2]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.authorization.web.OAuth2AuthorizationEndpointFilter.doFilterInternal(OAuth2AuthorizationEndpointFilter.java:186) ~[spring-security-oauth2-authorization-server-1.5.2.jar:1.5.2]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.authorization.web.OAuth2AuthorizationServerMetadataEndpointFilter.doFilterInternal(OAuth2AuthorizationServerMetadataEndpointFilter.java:91) ~[spring-security-oauth2-authorization-server-1.5.2.jar:1.5.2]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.authorization.oidc.web.OidcLogoutEndpointFilter.doFilterInternal(OidcLogoutEndpointFilter.java:105) ~[spring-security-oauth2-authorization-server-1.5.2.jar:1.5.2]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.AuthorizationServerContextFilter.doFilterInternal(AuthorizationServerContextFilter.java:69) ~[spring-security-oauth2-authorization-server-1.5.2.jar:1.5.2]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.3.jar:6.5.3]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.10.jar:6.2.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.10.jar:6.2.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.44.jar:10.1.44]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-09-12T11:20:34.559-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.w.s.HttpSessionRequestCache        : Saved request http://localhost:8080/oauth2/authorize?response_type=code&client_id=meu-client&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fauthorized&continue to session
2025-09-12T11:20:34.560-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Or [Ant [pattern='/oauth2/token', POST], Ant [pattern='/oauth2/introspect', POST], Ant [pattern='/oauth2/revoke', POST], Ant [pattern='/oauth2/device_authorization', POST]]
2025-09-12T11:20:34.563-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using Or [org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@5bf9c995, RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@3f5743d9, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@3f5743d9, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@3f5743d9, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-09-12T11:20:34.566-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@3f5743d9, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-09-12T11:20:34.567-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@6470078d
2025-09-12T11:20:34.567-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-09-12T11:20:34.572-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2025-09-12T11:20:34.599-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v2/api-docs/**'], Ant [pattern='/v2/api-docs/**']]] and having filters [] (1/8)
2025-09-12T11:20:34.600-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]] and having filters [] (2/8)
2025-09-12T11:20:34.601-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]] and having filters [] (3/8)
2025-09-12T11:20:34.601-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui.html/**'], Ant [pattern='/swagger-ui.html/**']]] and having filters [] (4/8)
2025-09-12T11:20:34.601-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]] and having filters [] (5/8)
2025-09-12T11:20:34.601-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]] and having filters [] (6/8)
2025-09-12T11:20:34.602-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain defined as 'authServerSecurityFilterChain' in [class path resource [com/victormacedov/library_api/config/AuthorizationServerConfiguration.class]] matching [org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000028181b2f330@60ca607] and having filters [DisableEncodeUrl, WebAsyncManagerIntegration, SecurityContextHolder, AuthorizationServerContext, HeaderWriter, Csrf, OidcLogoutEndpoint, Logout, OAuth2AuthorizationServerMetadataEndpoint, OAuth2AuthorizationEndpoint, OAuth2DeviceVerificationEndpoint, OidcProviderConfigurationEndpoint, NimbusJwkSetEndpoint, OAuth2ClientAuthentication, UsernamePasswordAuthentication, BearerTokenAuthentication, Authentication, RequestCacheAware, SecurityContextHolderAwareRequest, AnonymousAuthentication, ExceptionTranslation, Authorization, OAuth2TokenEndpoint, OAuth2TokenIntrospectionEndpoint, OAuth2TokenRevocationEndpoint, OAuth2DeviceAuthorizationEndpoint, OidcUserInfoEndpoint] (7/8)
2025-09-12T11:20:34.602-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain defined as 'securityFilterChain' in [class path resource [com/victormacedov/library_api/config/SecurityConfiguration.class]] matching [any request] and having filters [DisableEncodeUrl, WebAsyncManagerIntegration, SecurityContextHolder, HeaderWriter, Logout, OAuth2AuthorizationRequestRedirect, OAuth2LoginAuthentication, UsernamePasswordAuthentication, BearerTokenAuthentication, JwtCustomAuthentication, Authentication, RequestCacheAware, SecurityContextHolderAwareRequest, AnonymousAuthentication, ExceptionTranslation, Authorization] (8/8)
2025-09-12T11:20:34.602-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-09-12T11:20:34.602-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/16)
2025-09-12T11:20:34.603-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/16)
2025-09-12T11:20:34.603-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/16)
2025-09-12T11:20:34.603-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/16)
2025-09-12T11:20:34.603-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/16)
2025-09-12T11:20:34.604-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2025-09-12T11:20:34.604-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking OAuth2AuthorizationRequestRedirectFilter (6/16)
2025-09-12T11:20:34.604-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking OAuth2LoginAuthenticationFilter (7/16)
2025-09-12T11:20:34.604-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] .s.o.c.w.OAuth2LoginAuthenticationFilter : Did not match request to Ant [pattern='/login/oauth2/code/*']
2025-09-12T11:20:34.604-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking UsernamePasswordAuthenticationFilter (8/16)
2025-09-12T11:20:34.604-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] w.a.UsernamePasswordAuthenticationFilter : Did not match request to Ant [pattern='/login', POST]
2025-09-12T11:20:34.605-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (9/16)
2025-09-12T11:20:34.605-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2025-09-12T11:20:34.605-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking JwtCustomAuthenticationFilter (10/16)
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] w.c.HttpSessionSecurityContextRepository : Did not find SecurityContext in HttpSession 39C08819F10A098E8E5DE04E0B7FDFA9 using the SPRING_SECURITY_CONTEXT session attribute
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthenticationFilter (11/16)
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.s.w.a.AuthenticationFilter           : Did not match request to org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.DPoPAuthenticationConfigurer$DPoPRequestMatcher@335d7527
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (12/16)
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (13/16)
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (14/16)
2025-09-12T11:20:34.606-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (15/16)
2025-09-12T11:20:34.607-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (16/16)
2025-09-12T11:20:34.607-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing GET /login
2025-09-12T11:20:34.607-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on GET /login using org.springframework.security.authorization.SingleResultAuthorizationManager@2f565e59
2025-09-12T11:20:34.608-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /login
2025-09-12T11:20:34.614-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/login", parameters={}
2025-09-12T11:20:34.618-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ParameterizableViewController [view="login"]
2025-09-12T11:20:34.964-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2025-09-12T11:20:34.968-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-09-12T11:20:34.969-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=39C08819F10A098E8E5DE04E0B7FDFA9], Granted Authorities=[ROLE_ANONYMOUS]]
2025-09-12T11:20:42.778-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v2/api-docs/**'], Ant [pattern='/v2/api-docs/**']]] and having filters [] (1/8)
2025-09-12T11:20:42.778-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]] and having filters [] (2/8)
2025-09-12T11:20:42.778-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]] and having filters [] (3/8)
2025-09-12T11:20:42.778-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui.html/**'], Ant [pattern='/swagger-ui.html/**']]] and having filters [] (4/8)
2025-09-12T11:20:42.778-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]] and having filters [] (5/8)
2025-09-12T11:20:42.779-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]] and having filters [] (6/8)
2025-09-12T11:20:42.779-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain defined as 'authServerSecurityFilterChain' in [class path resource [com/victormacedov/library_api/config/AuthorizationServerConfiguration.class]] matching [org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000028181b2f330@60ca607] and having filters [DisableEncodeUrl, WebAsyncManagerIntegration, SecurityContextHolder, AuthorizationServerContext, HeaderWriter, Csrf, OidcLogoutEndpoint, Logout, OAuth2AuthorizationServerMetadataEndpoint, OAuth2AuthorizationEndpoint, OAuth2DeviceVerificationEndpoint, OidcProviderConfigurationEndpoint, NimbusJwkSetEndpoint, OAuth2ClientAuthentication, UsernamePasswordAuthentication, BearerTokenAuthentication, Authentication, RequestCacheAware, SecurityContextHolderAwareRequest, AnonymousAuthentication, ExceptionTranslation, Authorization, OAuth2TokenEndpoint, OAuth2TokenIntrospectionEndpoint, OAuth2TokenRevocationEndpoint, OAuth2DeviceAuthorizationEndpoint, OidcUserInfoEndpoint] (7/8)
2025-09-12T11:20:42.779-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain defined as 'securityFilterChain' in [class path resource [com/victormacedov/library_api/config/SecurityConfiguration.class]] matching [any request] and having filters [DisableEncodeUrl, WebAsyncManagerIntegration, SecurityContextHolder, HeaderWriter, Logout, OAuth2AuthorizationRequestRedirect, OAuth2LoginAuthentication, UsernamePasswordAuthentication, BearerTokenAuthentication, JwtCustomAuthentication, Authentication, RequestCacheAware, SecurityContextHolderAwareRequest, AnonymousAuthentication, ExceptionTranslation, Authorization] (8/8)
2025-09-12T11:20:42.779-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-09-12T11:20:42.779-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/16)
2025-09-12T11:20:42.779-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/16)
2025-09-12T11:20:42.779-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/16)
2025-09-12T11:20:42.779-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/16)
2025-09-12T11:20:42.779-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/16)
2025-09-12T11:20:42.780-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2025-09-12T11:20:42.780-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking OAuth2AuthorizationRequestRedirectFilter (6/16)
2025-09-12T11:20:42.780-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking OAuth2LoginAuthenticationFilter (7/16)
2025-09-12T11:20:42.780-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] .s.o.c.w.OAuth2LoginAuthenticationFilter : Did not match request to Ant [pattern='/login/oauth2/code/*']
2025-09-12T11:20:42.780-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Invoking UsernamePasswordAuthenticationFilter (8/16)
2025-09-12T11:20:42.781-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with CustomAuthenticationProvider (1/1)
2025-09-12T11:20:42.886-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2025-09-12T11:20:42.886-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-7] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 39C08819F10A098E8E5DE04E0B7FDFA9
2025-09-12T11:20:42.887-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=com.victormacedov.library_api.security.CustomAuthentication@70253d9d] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5cdb4512]
2025-09-12T11:20:42.887-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-7] w.a.UsernamePasswordAuthenticationFilter : Set SecurityContextHolder to com.victormacedov.library_api.security.CustomAuthentication@70253d9d
2025-09-12T11:20:42.887-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/oauth2/authorize?response_type=code&client_id=meu-client&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fauthorized&continue
2025-09-12T11:20:42.887-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2025-09-12T11:20:42.894-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v2/api-docs/**'], Ant [pattern='/v2/api-docs/**']]] and having filters [] (1/8)
2025-09-12T11:20:42.894-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]] and having filters [] (2/8)
2025-09-12T11:20:42.894-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]] and having filters [] (3/8)
2025-09-12T11:20:42.894-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui.html/**'], Ant [pattern='/swagger-ui.html/**']]] and having filters [] (4/8)
2025-09-12T11:20:42.894-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]] and having filters [] (5/8)
2025-09-12T11:20:42.894-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]] and having filters [] (6/8)
2025-09-12T11:20:42.895-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain defined as 'authServerSecurityFilterChain' in [class path resource [com/victormacedov/library_api/config/AuthorizationServerConfiguration.class]] matching [org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000028181b2f330@60ca607] and having filters [DisableEncodeUrl, WebAsyncManagerIntegration, SecurityContextHolder, AuthorizationServerContext, HeaderWriter, Csrf, OidcLogoutEndpoint, Logout, OAuth2AuthorizationServerMetadataEndpoint, OAuth2AuthorizationEndpoint, OAuth2DeviceVerificationEndpoint, OidcProviderConfigurationEndpoint, NimbusJwkSetEndpoint, OAuth2ClientAuthentication, UsernamePasswordAuthentication, BearerTokenAuthentication, Authentication, RequestCacheAware, SecurityContextHolderAwareRequest, AnonymousAuthentication, ExceptionTranslation, Authorization, OAuth2TokenEndpoint, OAuth2TokenIntrospectionEndpoint, OAuth2TokenRevocationEndpoint, OAuth2DeviceAuthorizationEndpoint, OidcUserInfoEndpoint] (7/8)
2025-09-12T11:20:42.895-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=meu-client&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fauthorized&continue
2025-09-12T11:20:42.895-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/27)
2025-09-12T11:20:42.895-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/27)
2025-09-12T11:20:42.895-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/27)
2025-09-12T11:20:42.895-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationServerContextFilter (4/27)
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (5/27)
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (6/27)
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] s.s.w.c.CsrfTokenRequestAttributeHandler : Wrote a CSRF token to the following request attributes: [_csrf, org.springframework.security.web.csrf.CsrfToken]
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match And [CsrfNotRequired [TRACE, HEAD, GET, OPTIONS], Not [Or [Or [Or [Ant [pattern='/oauth2/token', POST], Ant [pattern='/oauth2/introspect', POST], Ant [pattern='/oauth2/revoke', POST], Ant [pattern='/oauth2/device_authorization', POST], Ant [pattern='/oauth2/par', POST]], Ant [pattern='/.well-known/oauth-authorization-server', GET], Or [Ant [pattern='/oauth2/authorize', GET], Ant [pattern='/oauth2/authorize', POST]], Ant [pattern='/oauth2/token', POST], Ant [pattern='/oauth2/introspect', POST], Ant [pattern='/oauth2/revoke', POST], Ant [pattern='/oauth2/device_authorization', POST], Or [Ant [pattern='/oauth2/device_verification', GET], Ant [pattern='/oauth2/device_verification', POST]], Or [Ant [pattern='/.well-known/openid-configuration', GET], Or [Ant [pattern='/oauth2/logout', GET], Ant [pattern='/oauth2/logout', POST]], Or [Ant [pattern='/oauth2/userinfo', GET], Ant [pattern='/oauth2/userinfo', POST]]], Ant [pattern='/oauth2/jwks', GET]], org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@5bf9c995]]]
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking OidcLogoutEndpointFilter (7/27)
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (8/27)
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern='/logout', POST]
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking OAuth2AuthorizationServerMetadataEndpointFilter (9/27)
2025-09-12T11:20:42.896-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking OAuth2AuthorizationEndpointFilter (10/27)
2025-09-12T11:20:42.897-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=com.victormacedov.library_api.security.CustomAuthentication@70253d9d] from SPRING_SECURITY_CONTEXT
2025-09-12T11:20:42.897-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with OAuth2AuthorizationCodeRequestAuthenticationProvider (1/21)
2025-09-12T11:20:42.901-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] izationCodeRequestAuthenticationProvider : Retrieved registered client
2025-09-12T11:20:42.901-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] izationCodeRequestAuthenticationProvider : Validated authorization code request parameters
2025-09-12T11:20:42.905-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] izationCodeRequestAuthenticationProvider : Generated authorization code
2025-09-12T11:20:42.907-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] izationCodeRequestAuthenticationProvider : Saved authorization
2025-09-12T11:20:42.907-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] izationCodeRequestAuthenticationProvider : Authenticated authorization code request
2025-09-12T11:20:42.907-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/authorized?code=0r4OCM4FbcTRmYEVAYF6YrV_Gl-8Vt-8HpfQAtL4JdTg3nJZzbVYPJkwsLHN3xcNl7q3cdVDZqrCPuMhhoBZ-2BLs0B58xnVRaY0jQvcfFA6ck21kI52CG6R_6-soj45
2025-09-12T11:20:42.907-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2025-09-12T11:20:43.322-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v2/api-docs/**'], Ant [pattern='/v2/api-docs/**']]] and having filters [] (1/8)
2025-09-12T11:20:43.322-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]] and having filters [] (2/8)
2025-09-12T11:20:43.322-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]] and having filters [] (3/8)
2025-09-12T11:20:43.323-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui.html/**'], Ant [pattern='/swagger-ui.html/**']]] and having filters [] (4/8)
2025-09-12T11:20:43.323-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]] and having filters [] (5/8)
2025-09-12T11:20:43.323-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain matching [Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]] and having filters [] (6/8)
2025-09-12T11:20:43.323-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain defined as 'authServerSecurityFilterChain' in [class path resource [com/victormacedov/library_api/config/AuthorizationServerConfiguration.class]] matching [org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000028181b2f330@60ca607] and having filters [DisableEncodeUrl, WebAsyncManagerIntegration, SecurityContextHolder, AuthorizationServerContext, HeaderWriter, Csrf, OidcLogoutEndpoint, Logout, OAuth2AuthorizationServerMetadataEndpoint, OAuth2AuthorizationEndpoint, OAuth2DeviceVerificationEndpoint, OidcProviderConfigurationEndpoint, NimbusJwkSetEndpoint, OAuth2ClientAuthentication, UsernamePasswordAuthentication, BearerTokenAuthentication, Authentication, RequestCacheAware, SecurityContextHolderAwareRequest, AnonymousAuthentication, ExceptionTranslation, Authorization, OAuth2TokenEndpoint, OAuth2TokenIntrospectionEndpoint, OAuth2TokenRevocationEndpoint, OAuth2DeviceAuthorizationEndpoint, OidcUserInfoEndpoint] (7/8)
2025-09-12T11:20:43.323-03:00 DEBUG 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2025-09-12T11:20:43.323-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/27)
2025-09-12T11:20:43.323-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/27)
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/27)
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationServerContextFilter (4/27)
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (5/27)
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (6/27)
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] s.s.w.c.CsrfTokenRequestAttributeHandler : Wrote a CSRF token to the following request attributes: [_csrf, org.springframework.security.web.csrf.CsrfToken]
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.csrf.CsrfFilter         : Did not protect against CSRF since request did not match And [CsrfNotRequired [TRACE, HEAD, GET, OPTIONS], Not [Or [Or [Or [Ant [pattern='/oauth2/token', POST], Ant [pattern='/oauth2/introspect', POST], Ant [pattern='/oauth2/revoke', POST], Ant [pattern='/oauth2/device_authorization', POST], Ant [pattern='/oauth2/par', POST]], Ant [pattern='/.well-known/oauth-authorization-server', GET], Or [Ant [pattern='/oauth2/authorize', GET], Ant [pattern='/oauth2/authorize', POST]], Ant [pattern='/oauth2/token', POST], Ant [pattern='/oauth2/introspect', POST], Ant [pattern='/oauth2/revoke', POST], Ant [pattern='/oauth2/device_authorization', POST], Or [Ant [pattern='/oauth2/device_verification', GET], Ant [pattern='/oauth2/device_verification', POST]], Or [Ant [pattern='/.well-known/openid-configuration', GET], Or [Ant [pattern='/oauth2/logout', GET], Ant [pattern='/oauth2/logout', POST]], Or [Ant [pattern='/oauth2/userinfo', GET], Ant [pattern='/oauth2/userinfo', POST]]], Ant [pattern='/oauth2/jwks', GET]], org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$BearerTokenRequestMatcher@5bf9c995]]]
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking OidcLogoutEndpointFilter (7/27)
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (8/27)
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Ant [pattern='/logout', POST]
2025-09-12T11:20:43.324-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking OAuth2AuthorizationServerMetadataEndpointFilter (9/27)
2025-09-12T11:20:43.325-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking OAuth2AuthorizationEndpointFilter (10/27)
2025-09-12T11:20:43.325-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking OAuth2DeviceVerificationEndpointFilter (11/27)
2025-09-12T11:20:43.325-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking OidcProviderConfigurationEndpointFilter (12/27)
2025-09-12T11:20:43.325-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking NimbusJwkSetEndpointFilter (13/27)
2025-09-12T11:20:43.325-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking OAuth2ClientAuthenticationFilter (14/27)
2025-09-12T11:20:43.327-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtClientAssertionAuthenticationProvider (1/21)
2025-09-12T11:20:43.328-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with X509ClientCertificateAuthenticationProvider (2/21)
2025-09-12T11:20:43.329-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with ClientSecretAuthenticationProvider (3/21)
2025-09-12T11:20:43.333-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] s.a.a.ClientSecretAuthenticationProvider : Retrieved registered client
2025-09-12T11:20:43.413-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] s.a.a.ClientSecretAuthenticationProvider : Validated client authentication parameters
2025-09-12T11:20:43.414-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.o.s.a.a.CodeVerifierAuthenticator  : Retrieved authorization with authorization code
2025-09-12T11:20:43.414-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.o.s.a.a.CodeVerifierAuthenticator  : Did not authenticate code verifier since requireProofKey=false
2025-09-12T11:20:43.414-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] s.a.a.ClientSecretAuthenticationProvider : Authenticated client secret
2025-09-12T11:20:43.414-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking UsernamePasswordAuthenticationFilter (15/27)
2025-09-12T11:20:43.414-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] w.a.UsernamePasswordAuthenticationFilter : Did not match request to Ant [pattern='/login', POST]
2025-09-12T11:20:43.414-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (16/27)
2025-09-12T11:20:43.414-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Did not process request since did not find bearer token
2025-09-12T11:20:43.414-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthenticationFilter (17/27)
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.w.a.AuthenticationFilter           : Did not match request to org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.DPoPAuthenticationConfigurer$DPoPRequestMatcher@237afe1d
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (18/27)
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (19/27)
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (20/27)
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (21/27)
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (22/27)
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /oauth2/token
2025-09-12T11:20:43.415-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /oauth2/token using org.springframework.security.authorization.AuthenticatedAuthorizationManager@4e0f850d
2025-09-12T11:20:43.417-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated OAuth2ClientAuthenticationToken [Principal=meu-client, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]]
2025-09-12T11:20:43.417-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Invoking OAuth2TokenEndpointFilter (23/27)
2025-09-12T11:20:43.419-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with OAuth2AuthorizationCodeAuthenticationProvider (1/21)
2025-09-12T11:20:43.421-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] 2AuthorizationCodeAuthenticationProvider : Retrieved registered client
2025-09-12T11:20:43.421-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] 2AuthorizationCodeAuthenticationProvider : Retrieved authorization with authorization code
2025-09-12T11:20:43.421-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] 2AuthorizationCodeAuthenticationProvider : Validated token request parameters
2025-09-12T11:20:43.491-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] 2AuthorizationCodeAuthenticationProvider : Generated access token
2025-09-12T11:20:43.491-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] 2AuthorizationCodeAuthenticationProvider : Generated refresh token
2025-09-12T11:20:43.492-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] 2AuthorizationCodeAuthenticationProvider : Saved authorization
2025-09-12T11:20:43.492-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] 2AuthorizationCodeAuthenticationProvider : Authenticated token request
2025-09-12T11:20:43.519-03:00 TRACE 12660 --- [libraryapi] [http-nio-8080-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
